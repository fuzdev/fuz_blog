import"../chunks/DsnmJJEf.js";import{k as De,y as Me,v as ze,h as Te,p as tt,f as D,d,r as i,s as p,N as o,aA as Yt,aq as re,b as y,c as et,L as ot,a as $,O as b,t as B,e as W,aG as ie,bo as Nt,bm as Ee,a0 as _t,a1 as Rt,ap as Pe,a4 as Ot,bp as Se,$ as le,a2 as je,a3 as Ae}from"../chunks/CxdFUNII.js";import{s as q}from"../chunks/BYa1Q4kK.js";import{i as P}from"../chunks/DdZF8sb5.js";import{h as Ie}from"../chunks/q-aOpN7P.js";import{a as mt,C as Oe,c as He,s as Y,e as ce,b as Le,S as Kt,i as de,d as Ct,h as Re,r as Ce}from"../chunks/TUNp80ZE.js";import{r as ue,p as E}from"../chunks/Dx5pQDUk.js";import{t as Z,s as Q,k as Fe}from"../chunks/DDB2DqEb.js";import{b as Ye,a as Ne}from"../chunks/o2Ijq4oA.js";import{b as Ue}from"../chunks/DT8qXoiJ.js";import{P as Be}from"../chunks/BAzXkvnu.js";import{i as Xe}from"../chunks/WYnjNghI.js";import{h as Ht}from"../chunks/DyP9N9AB.js";import{a as st,n as Ut,g as Zt,b as qe,e as Ge,m as Qt,c as Mt,f as Lt,F as Ve}from"../chunks/Dr_lr19u.js";import{E as Je}from"../chunks/C7lgd2ss.js";import{o as Ke,s as zt,d as Wt,m as Ze}from"../chunks/C7vgnIKM.js";import{c as Qe}from"../chunks/DY91rLDn.js";import{b as We}from"../chunks/BDKYvW-3.js";function $e(e,t){De&&Me(ze(e)),Te(()=>{var a=t();for(var n in a){var s=a[n];s?e.style.setProperty(n,s):e.style.removeProperty(n)}})}const ta=Qe();function Tt(e,t){const a=+st(e)-+st(t);return a<0?-1:a>0?1:a}function ea(e,t,a){const[n,s]=Ut(a?.in,e,t),r=n.getFullYear()-s.getFullYear(),l=n.getMonth()-s.getMonth();return r*12+l}function aa(e){return t=>{const a=Math.trunc,n=a(t);return n===0?0:n}}function oa(e,t){return+st(e)-+st(t)}function sa(e,t){const a=st(e,t?.in);return a.setHours(23,59,59,999),a}function na(e,t){const a=st(e,t?.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function ra(e,t){const a=st(e,t?.in);return+sa(a,t)==+na(a,t)}function ia(e,t,a){const[n,s,r]=Ut(a?.in,e,e,t),l=Tt(s,r),u=Math.abs(ea(s,r));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-l*u);let c=Tt(s,r)===-l;ra(n)&&u===1&&Tt(n,r)===1&&(c=!1);const _=l*(u-+c);return _===0?0:_}function la(e,t,a){const n=oa(e,t)/1e3;return aa()(n)}function $t(e,t,a){const n=qe(),s=a?.locale??n.locale??Ge,r=2520,l=Tt(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:l}),[c,_]=Ut(a?.in,...l>0?[t,e]:[e,t]),m=la(_,c),g=(Zt(_)-Zt(c))/1e3,f=Math.round((m-g)/60);let w;if(f<2)return f===0?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",f,u);if(f<45)return s.formatDistance("xMinutes",f,u);if(f<90)return s.formatDistance("aboutXHours",1,u);if(f<Qt){const h=Math.round(f/60);return s.formatDistance("aboutXHours",h,u)}else{if(f<r)return s.formatDistance("xDays",1,u);if(f<Mt){const h=Math.round(f/Qt);return s.formatDistance("xDays",h,u)}else if(f<Mt*2)return w=Math.round(f/Mt),s.formatDistance("aboutXMonths",w,u)}if(w=ia(_,c),w<12){const h=Math.round(f/Mt);return s.formatDistance("xMonths",h,u)}else{const h=w%12,x=Math.trunc(w/12);return h<3?s.formatDistance("aboutXYears",x,u):h<9?s.formatDistance("overXYears",x,u):s.formatDistance("almostXYears",x+1,u)}}var ca=D('<span class="animation svelte-eax9wj"><!></span>'),da=D('<button><span class="content svelte-eax9wj"><!></span> <!></button>');function ua(e,t){tt(t,!0);const a=ue(t,["$$slots","$$events","$$legacy","pending","onclick","running","title","disabled","animation","children"]);let n=Yt(void 0);var r={focus:g=>o(n)?.focus(g)},l=da();mt(l,()=>({type:"button",...a,class:`pending_button ${t.class??""}`,disabled:t.disabled??t.pending,title:t.title,onclick:t.onclick,[Oe]:{pending:t.pending}}),void 0,void 0,void 0,"svelte-eax9wj");var u=d(l),c=d(u);q(c,()=>t.children),i(u);var _=p(u,2);{var m=g=>{var f=ca(),w=d(f);{var h=v=>{var S=ot(),j=$(S);q(j,()=>t.animation),y(v,S)},x=v=>{Be(v,{get running(){return t.running}})};P(w,v=>{t.animation?v(h):v(x,!1)})}i(f),y(g,f)};P(_,g=>{t.pending&&g(m)})}return i(l),Ue(l,g=>re(n,g),()=>o(n)),y(e,l),et(r)}var va=D('<div class="content panel p_md mb_lg svelte-wl68el"><!></div>'),fa=D("<details><summary> </summary><!></details>"),_a=D('<div class="mastodon_status_item svelte-wl68el"><header class="svelte-wl68el"><button type="button" class="avatar plain icon_button svelte-wl68el"><img class="icon svelte-wl68el"/></button> <div class="names svelte-wl68el"><div class="name svelte-wl68el"><a> </a></div> <small class="svelte-wl68el"> </small> <small class="date svelte-wl68el"><a class="svelte-wl68el"> </a></small></div></header> <!> <div class="content svelte-wl68el"><!></div></div>');function Ft(e,t){tt(t,!0);const a=b(()=>t.item.created_at),n=b(()=>t.item.edited_at),s=b(()=>t.item.content),r=b(()=>t.item.account),l=b(()=>t.item.url),u=b(()=>t.item.sensitive),c=b(()=>t.item.spoiler_text),_=b(()=>o(r).created_at),m=b(()=>o(r).avatar_static),g=b(()=>o(r).url),f=b(()=>o(r).display_name),w=b(()=>o(r).followers_count),h=b(()=>o(r).following_count),x=b(()=>o(r).acct),v=b(()=>o(r).note),S=b(()=>Lt(new Date(o(_)),"PPpp")),j=b(()=>$t(new Date,new Date(o(a)))),z=b(()=>o(n)?Lt(new Date(o(n)),"PPpp"):null),H=b(()=>o(n)?$t(new Date,new Date(o(n))):null),C=b(()=>Lt(new Date(o(_)),"MMM yyyy"));let I=Yt(!1);const F=()=>{re(I,!o(I))};var N=_a(),L=d(N),T=d(L);T.__click=function(...O){(o(v)?F:void 0)?.apply(this,O)};var U=d(T);i(T);var G=p(T,2),nt=d(G),at=d(nt),ht=d(at,!0);i(at),i(nt);var rt=p(nt,2),gt=d(rt,!0);i(rt);var V=p(rt,2),it=d(V),ut=d(it);i(it),i(V),i(G),i(L);var vt=p(L,2);{var Et=O=>{var R=va(),J=d(R);Ht(J,()=>o(v)),i(R),Z(3,R,()=>Q),y(O,R)};P(vt,O=>{o(I)&&o(v)&&O(Et)})}var lt=p(vt,2),yt=d(lt);{var Pt=O=>{var R=fa(),J=d(R),bt=d(J,!0);i(J);var jt=p(J);Ht(jt,()=>o(s)),i(R),B(()=>W(bt,o(c)||"view sensitive content")),y(O,R)},St=O=>{var R=ot(),J=$(R);Ht(J,()=>o(s)),y(O,R)};P(yt,O=>{o(u)?O(Pt):O(St,!1)})}i(lt),i(N),B(O=>{Y(T,"title",o(v)?`${o(I)?"hide":"show"} ${o(x)}'s profile`:void 0),T.disabled=!o(v),Y(T,"aria-label",o(v)?`${o(I)?"hide":"show"} ${o(x)}'s profile`:void 0),Y(U,"src",o(m)),Y(U,"alt",`avatar for ${o(x)??""}`),Y(at,"href",o(g)),Y(at,"title",O),W(ht,o(f)),Y(rt,"title",`following ${o(h)??""}, ${o(w)??""} followers`),W(gt,o(x)),Y(V,"title",`posted ${o(S)??""}${o(z)?`, edited ${o(z)}`:""}, joined ${o(C)??""}`),Y(it,"href",o(l)),W(ut,`${o(j)??""} ago${o(H)?`, edited ${o(H)} ago`:""}`)},[()=>He(o(g),"https://")]),y(e,N),et()}ie(["click"]);var ma=D('<li class="svelte-lw2ink"><!> <!></li>'),ha=D('<ul class="mastodon_status_tree unstyled svelte-lw2ink"></ul>');function ve(e,t){tt(t,!0);const a=b(()=>t.item.id),n=b(()=>t.items.filter(u=>u.in_reply_to_id===o(a)));var s=ot(),r=$(s);{var l=u=>{var c=ha();ce(c,21,()=>o(n),_=>_.id,(_,m)=>{var g=ma(),f=d(g);Ft(f,{get item(){return o(m)}});var w=p(f,2);ve(w,{get item(){return o(m)},get items(){return t.items}}),i(g),y(_,g)}),i(c),y(u,c)};P(r,u=>{o(n).length&&u(l)})}y(e,s),et()}const ga=e=>JSON.stringify(e,(t,a)=>{if(a!==null&&typeof a=="object"&&!Array.isArray(a)){const n={},s=Object.keys(a).sort();for(const r of s)n[r]=a[r];return n}return a}),te="application/vnd.github+json",ya="2022-11-28",Bt=async(e,t)=>{const{request:a,params:n,parse:s,token:r,cache:l,return_early_from_cache:u,log:c,fetch:_=globalThis.fetch}=t??Je,m=typeof e=="string"?new URL(e):e,g=m.href,f=a?.method??(n?"POST":"GET");let w,h;if(l&&(h=pa(g,n,f),w=l.get(h),u&&w))return c?.info("[fetch_value] cached locally and returning early",g),c?.debug("[fetch_value] cached value",w),{ok:!0,value:w.value,headers:ee(w)};const x=a?.body??(f==="GET"||f==="HEAD"?null:JSON.stringify(n??{})),v=new Headers(a?.headers);v.has("accept")||v.set("accept",m.hostname==="api.github.com"?te:"application/json"),v.get("accept")===te&&!v.has("x-github-api-version")&&v.set("x-github-api-version",ya),x&&!v.has("content-type")&&v.set("content-type","application/json"),r&&!v.has("authorization")&&v.set("authorization","Bearer "+r);const S=w?.etag;if(S&&!v.has("if-none-match"))v.set("if-none-match",S);else{const F=w?.last_modified;F&&!v.has("if-modified-since")&&v.set("if-modified-since",F)}const j=new Request(m,{...a,headers:v,method:f,body:x});c?.info("[fetch_value] fetching url with headers",e),c?.debug("[fetch_value] fetching with headers",ba(v));const z=await _(j);if(c?.info("[fetch_value] fetched",e,z.status,wa(z.headers)),c?.debug("[fetch_value] fetched",Object.fromEntries(z.headers.entries())),z.status===429)throw Error("ratelimited exceeded fetching url "+e);if(z.status===304){if(!w)throw Error("unexpected 304 status without a cached value");return c?.info("[fetch_value] cache hit",e),{ok:!0,value:w.value,headers:ee(w)}}if(!z.ok)return{ok:!1,status:z.status,message:z.statusText};const H=z.headers.get("content-type"),C=await(!H||H.includes("json")?z.json():z.text()),I=s?s(C):C;if(c?.debug("[fetch_value] fetched json",e,I),h){const F={key:h,url:g,params:n,value:I,etag:z.headers.get("etag"),last_modified:z.headers.get("etag")?null:z.headers.get("last-modified")};l.set(h,F)}return{ok:!0,value:I,headers:z.headers}},ee=e=>{const t=new Headers;return e.etag&&t.set("etag",e.etag),e.last_modified&&t.set("last-modified",e.last_modified),t},ba=e=>{const t=Object.fromEntries(e.entries());return t.authorization&&(t.authorization="[REDACTED]"),t},wa=e=>{const t=e.get("x-ratelimit-limit"),a=e.get("x-ratelimit-remaining");return t||a?`ratelimit ${a} of ${t}`:""},fe=zt(),xa=Ke({key:fe,url:zt(),params:Wt(),value:Wt(),etag:zt().nullable(),last_modified:zt().nullable()});Ze(fe,xa);const ae="::",pa=(e,t,a)=>{let n=a+ae+e;return t!=null&&(n+=ae+ga(t)),n};class ka extends Error{constructor(t,a=`Unreachable case: ${t}`,n){super(a,n)}}const Da=e=>Array.isArray(e)?e:[e],Ma=(e,t)=>`https://${e}/api/v1/statuses/${t}`,za=(e,t)=>`https://${e}/api/v1/statuses/${t}/context`,Ta=(e,t)=>`https://${e}/api/v1/statuses/${t}/favourited_by`,_e=e=>{try{const t=new URL(e),a=Le(t.pathname,"/context").split("/").filter(Boolean),n=a[0]?.[0]==="@"?a[0].substring(1):null;if(!n)return null;const s=a.length>1?a[a.length-1]:null;return s?{href:e,host:t.host,author:n,status_id:s}:null}catch{return null}},Ea=async(e,t,a,n,s,r,l)=>{const u=za(e,t),c=await Bt(u,{request:s,token:r,cache:a,return_early_from_cache:Nt,log:n,fetch:l});return c.ok?c.value:null},Pa=async(e,t,a,n,s,r,l)=>{const u=Ma(e,t),c=await Bt(u,{request:s,token:r,cache:a,return_early_from_cache:Nt,log:n,fetch:l});return c.ok?c.value:null},Sa=async(e,t,a,n,s,r,l)=>{const u=Ta(e,t),c=await Bt(u,{request:s,token:r,cache:a,return_early_from_cache:Nt,log:n,fetch:l});return c.ok?c.value:null},ja=async(e,t,a,n,s)=>{const r=a?Da(a):null,l=t.descendants;if(!l.length||!r?.length)return[];const u=new URL(e.url).host,c=new Set;for(const _ of l)for(const m of r)if(m.type==="favourited_by"){if(!_.favourites_count)continue;if((await Sa(u,_.id,n,s))?.find(w=>m.favourited_by.includes(w.acct))){c.add(_.id);break}}else if(m.type==="minimum_favourites"){if(_.favourites_count>=m.minimum_favourites){c.add(_.id);break}}else if(m.type==="custom"){if(m.should_include(_,e,t)){c.add(_.id);break}}else throw new ka(m);return l.filter(_=>c.has(_.id)?_:null)};function Aa(e,t){tt(t,!0);let a=E(t,"include_ancestors",3,!1),n=E(t,"include_replies",3,!1),s=E(t,"loading",15),r=E(t,"item",15),l=E(t,"status_context",15),u=E(t,"replies",15),c=E(t,"load_time",15);const _=b(()=>a()||n()),m=b(()=>t.reply_filter===void 0?n()?{type:"custom",should_include:()=>!0}:null:t.reply_filter),g=async()=>{if(!t.host||!t.id)return;const h=performance.now();s(!0),await(async x=>{var v=Ee(x,2);r(v[0]),l(v[1])})(await Promise.all([Pa(t.host,t.id,t.cache,t.log),o(_)?Ea(t.host,t.id,t.cache,t.log):null])),r()&&l()?u(await ja(r(),l(),typeof o(m)=="function"?o(m)(r(),l()):o(m),t.cache,t.log)):u(null),s(!1),c(performance.now()-h)};var f=ot(),w=$(f);q(w,()=>t.children,()=>({item:r(),status_context:l(),replies:u(),load:g,loading:s(),load_time:c()})),y(e,f),et()}const oe=(e,t,a)=>{try{const n=localStorage.getItem(e);if(!n)return t();const s=JSON.parse(n);return a?.(s),s}catch{try{localStorage.removeItem(e)}catch{}return t()}},se=(e,t)=>{try{t===void 0?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t))}catch{}},ne={inform:{color:"var(--text_70)",icon:"âœ»"},help:{color:"var(--color_b_50)",icon:"âžº"},error:{color:"var(--color_c_50)",icon:"!?"}};var Ia=D('<div class="icon svelte-9lbevi"><!></div>'),Oa=D('<!> <div class="content svelte-9lbevi"><!></div>',1),Ha=D("<button><!></button>"),La=D("<div><!></div>");function Ra(e,t){tt(t,!0);const a=h=>{var x=Oa(),v=$(x);{var S=H=>{var C=Ia(),I=d(C);{var F=L=>{var T=_t();B(()=>W(T,o(_))),y(L,T)},N=L=>{var T=ot(),U=$(T);q(U,()=>t.icon,()=>o(_)),y(L,T)};P(I,L=>{!t.icon||typeof t.icon=="string"?L(F):L(N,!1)})}i(C),y(H,C)};P(v,H=>{t.icon!==null&&H(S)})}var j=p(v,2),z=d(j);q(z,()=>t.children),i(j),y(h,x)},n=E(t,"status",3,"inform"),s=ue(t,["$$slots","$$events","$$legacy","status","color","onclick","disabled","icon","children"]),r=b(()=>ne[n()]),l=b(()=>o(r).color),u=b(()=>o(r).icon),c=b(()=>t.color??o(l)),_=b(()=>typeof t.icon=="string"?t.icon:o(u)??ne.inform.icon);var m=ot(),g=$(m);{var f=h=>{var x=Ha();mt(x,()=>({type:"button",...s,class:`alert ${t.class??""}`,onclick:t.onclick,disabled:t.disabled,[Kt]:{"--text_color":o(c)}}),void 0,void 0,void 0,"svelte-9lbevi");var v=d(x);a(v),i(x),y(h,x)},w=h=>{var x=La();mt(x,()=>({role:"alert",...s,class:`alert panel ${t.class??""}`,[Kt]:{"--text_color":o(c)}}),void 0,void 0,void 0,"svelte-9lbevi");var v=d(x);a(v),i(x),y(h,x)};P(g,h=>{t.onclick?h(f):h(w,!1)})}y(e,m),et()}var Ca=D("<div><!></div>"),Fa=D('<fieldset><div><label title="where to load the toot" class="flex:1 row"><a class="icon_button box mr_lg">ðŸ”—</a> <input/></label></div> <!></fieldset>');function Ya(e,t){tt(t,!0);let a=E(t,"url",15);const n=b(()=>_e(a())),s=b(()=>!!(a()&&!o(n)));var r=Fa(),l=d(r);let u;var c=d(l),_=d(c);de(_,"",{},{"font-size":"var(--font_size_xl)"});var m=p(_,2),g=h=>h.currentTarget.select();mt(m,()=>({placeholder:"> toot url",onfocus:g,...t.attrs}),void 0,void 0,void 0,void 0,!0),i(c),i(l);var f=p(l,2);{var w=h=>{var x=Ca(),v=d(x);Ra(v,{status:"error",children:(S,j)=>{Rt();var z=_t("invalid Mastodon status url");y(S,z)},$$slots:{default:!0}}),i(x),Z(3,x,()=>Q),y(h,x)};P(f,h=>{o(s)&&h(w)})}i(r),B(()=>{u=Ct(l,1,"row",null,u,{mb_lg:o(s)}),Y(_,"href",a()||void 0)}),Ye(m,a),y(e,r),et()}var Na=D("<div></div>"),Ua=D('<div class="transition_wrapper svelte-otzyot"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Ba=D('<div class="icon_button_content svelte-otzyot"><div class="icon svelte-otzyot">ðŸ¦£</div> <div class="button_content svelte-otzyot"><div>load toot<!> from</div> <code class="ellipsis"><!></code></div></div>'),Xa=D('<div class="transition_wrapper svelte-otzyot"><!></div>'),qa=D('<div class="pb_md"><a rel="noreferrer" class="display:block panel p_md"><span class="font_family_mono">â†ªï¸Ž</span> reply on Mastodon</a></div>'),Ga=D('<div class="loaded_message svelte-otzyot"> </div>'),Va=D(`<div class="settings controls panel svelte-otzyot"><form class="width:100%"><div class="mb_lg"><!></div> <fieldset class="row"><label class="row"><input type="checkbox"/>automatically load when
										scrolled onscreen</label></fieldset></form> <!></div>`),Ja=D('<div><div class="toot_content svelte-otzyot"><!> <div class="main_post panel svelte-otzyot"><div class="panel bg_panel svelte-otzyot"><!></div></div> <!></div> <!> <div class="toot_controls svelte-otzyot"><div class="controls svelte-otzyot"><div class="row"><button type="button">settings</button> <div class="reset svelte-otzyot"><button type="button">reset</button><!></div></div></div> <!></div></div>');function Ka(e,t){tt(t,!0);let a=E(t,"updated_url",31,()=>Pe(t.url)),n=E(t,"include_ancestors",3,!1),s=E(t,"include_replies",3,!1),r=E(t,"loading",15),l=E(t,"load_time",15),u=E(t,"initial_show_settings",3,!1),c=E(t,"show_settings",15),_=E(t,"autoload_storage_key",3,"autoload"),m=E(t,"initial_autoload",3,!1),g=E(t,"autoload",23,()=>_()?oe(_(),()=>m()):m()),f=Yt(1);const w=()=>{Se(f),a(t.url),r(void 0),l(void 0),t.onreset?.()},h=b(()=>t.settings_storage_key&&"show_settings"+t.settings_storage_key);Ot(()=>{c()===void 0&&c(o(h)?oe(o(h),()=>u()):u())}),Ot(()=>{o(h)&&se(o(h),c())});const x=()=>{c(!c())};Ot(()=>{_()&&se(_(),g())});const v=b(()=>_e(a())),S=b(()=>o(v)?.status_id??null),j=b(()=>o(v)?.host??null),z=b(()=>r()!==!1&&!!o(j)),H=b(()=>r()!==void 0||a()!==t.url);var C={reset:w},I=ot(),F=$(I);return Fe(F,()=>o(f),N=>{Aa(N,{get host(){return o(j)},get id(){return o(S)},get include_ancestors(){return n()},get include_replies(){return s()},get cache(){return t.cache},get log(){return t.log},get reply_filter(){return t.reply_filter},get loading(){return r()},set loading(T){r(T)},get load_time(){return l()},set load_time(T){l(T)},children:(T,U)=>{let G=()=>U?.().item,nt=()=>U?.().status_context,at=()=>U?.().replies,ht=()=>U?.().load,rt=()=>U?.().loading,gt=()=>U?.().load_time;var V=Ja();let it;var ut=d(V),vt=d(ut);{var Et=M=>{var k=Na();ce(k,21,()=>nt().ancestors,A=>A.id,(A,K)=>{Ft(A,{get item(){return o(K)}})}),i(k),Z(3,k,()=>Q),y(M,k)};P(vt,M=>{n()&&nt()&&M(Et)})}var lt=p(vt,2),yt=d(lt),Pt=d(yt);{var St=M=>{var k=Ua(),A=d(k);$e(A,()=>({"--margin":"0"})),Ft(A.lastChild,{get item(){return G()}}),i(A),i(k),Z(3,k,()=>Q),y(M,k)},O=M=>{var k=Xa(),A=d(k);{let K=b(()=>rt()||!1),It=b(()=>!o(z));ua(A,{get pending(){return o(K)},get disabled(){return o(It)},onclick:()=>ht()(),children:(pt,kt)=>{var ct=Ba(),Dt=p(d(ct),2),ft=d(Dt),be=p(d(ft));{var we=X=>{var dt=_t("s");y(X,dt)};P(be,X=>{(s()||n())&&X(we)})}Rt(),i(ft);var Jt=p(ft,2),xe=d(Jt);{var pe=X=>{var dt=_t();B(()=>W(dt,o(j))),y(X,dt)},ke=X=>{var dt=_t("invalid url");y(X,dt)};P(xe,X=>{o(j)?X(pe):X(ke,!1)})}i(Jt),i(Dt),i(ct),y(pt,ct)},$$slots:{default:!0}})}i(k),Z(3,k,()=>Q),y(M,k)};P(Pt,M=>{G()?M(St):M(O,!1)})}i(yt),i(lt);var R=p(lt,2);{var J=M=>{ve(M,{get item(){return G()},get items(){return at()}})};P(R,M=>{G()&&at()&&M(J)})}i(ut);var bt=p(ut,2);{var jt=M=>{var k=qa(),A=d(k);i(k),B(()=>Y(A,"href",G().url)),Z(3,k,()=>Q),y(M,k)};P(bt,M=>{G()&&M(jt)})}var Xt=p(bt,2),wt=d(Xt),qt=d(wt),xt=d(qt);xt.__click=x;let Gt;de(xt,"",{},{"margin-right":"var(--space_sm)"});var Vt=p(xt,2),At=d(Vt);At.__click=w;var me=p(At);{var he=M=>{var k=Ga(),A=d(k);i(k),B(K=>W(A,`loaded in ${K??""}ms`),[()=>Math.round(gt())]),Z(3,k,()=>Q),y(M,k)};P(me,M=>{gt()!==void 0&&M(he)})}i(Vt),i(qt),i(wt),Re(wt,()=>Xe(()=>({onintersect:({intersecting:M})=>{M&&g()&&ht()()},count:1})));var ge=p(wt,2);{var ye=M=>{var k=Va(),A=d(k),K=d(A),It=d(K);Ya(It,{get url(){return a()},set url(ft){a(ft)}}),i(K);var pt=p(K,2),kt=d(pt),ct=d(kt);Ce(ct),Rt(),i(kt),i(pt),i(A);var Dt=p(A,2);q(Dt,()=>t.settings??le),i(k),B(()=>Y(kt,"title",g()?"replies will load automatically when scrolled intersect":"replies are not loaded until you request them")),Ne(ct,g),Z(3,k,()=>Q),y(M,k)};P(ge,M=>{c()&&M(ye)})}i(Xt),i(V),B(()=>{it=Ct(V,1,"toot svelte-otzyot",null,it,{replies:at()}),Gt=Ct(xt,1,"deselectable",null,Gt,{selected:c()}),At.disabled=!o(H)}),Z(3,V,()=>Q),y(T,V)},$$slots:{default:!0}})}),y(e,I),et(C)}ie(["click"]);var Za=D('<header><h1 class="mt_xl5 mb_lg"> </h1> <p class="mb_xl5"><!></p></header>');function Qa(e,t){tt(t,!0);var a=Za(),n=d(a),s=d(n,!0);i(n);var r=p(n,2),l=d(r);Ve(l,{get item(){return t.item}}),i(r),i(a),B(()=>W(s,t.item.title)),y(e,a),et()}const Wa=e=>{var t=$a();y(e,t)};var $a=D("<hr/>"),to=D("<!>  <section><h2>Comments</h2> <!></section> <!>",1),eo=D("<article><!> <!> <!> <!></article>"),ao=D("<div>cannot find post <code> </code></div>"),oo=D('<div class="blog_post width_atmost_md"><!></div>');function so(e,t){tt(t,!0);const a=E(t,"separator",3,Wa),s=We.get().items.find(m=>m.slug===t.post.slug),r=ta.get_maybe();var l=oo();Ie("rbljul",m=>{je(()=>{Ae.title=t.post.title??""})});var u=d(l);{var c=m=>{var g=eo();mt(g,()=>({...t.attrs}));var f=d(g);Qa(f,{get item(){return s}});var w=p(f,2);q(w,()=>t.children);var h=p(w,2);q(h,()=>t.footer??le);var x=p(h,2);{var v=S=>{var j=to(),z=$(j);q(z,a);var H=p(z,2),C=p(d(H),2);{var I=N=>{{let L=b(()=>r?.data);Ka(N,{get url(){return s.comments.url},include_replies:!0,initial_autoload:!0,reply_filter:T=>({type:"favourited_by",favourited_by:[T.account.acct]}),get settings_storage_key(){return`${s.id??""}_comments_settings`},get cache(){return o(L)}})}};P(C,N=>{(!r||r.data!==void 0)&&N(I)})}i(H);var F=p(H,2);q(F,a),y(S,j)};P(x,S=>{s.comments&&S(v)})}i(g),y(m,g)},_=m=>{var g=ao(),f=p(d(g)),w=d(f,!0);i(f),i(g),B(()=>W(w,t.post.slug)),y(m,g)};P(u,m=>{s?m(c):m(_,!1)})}i(l),y(e,l),et()}var no=D('<footer class="svelte-3u5v06"><div class="panel p_lg"><p><span>find me on <a href="https://joinmastodon.org/">Mastodon</a> and <a href="https://wikipedia.org/wiki/ActivityPub">ActivityPub</a>:</span> <br/> <a href="https://hci.social/@ryanatkn">@ryanatkn@hci.social</a></p></div></footer>');function ro(e){var t=no();y(e,t)}const io={title:"Hello fuz_blog",slug:"hello-fuz-blog",date_published:"2024-07-10T16:04:49.688Z",date_modified:"2024-07-15T18:27:36.477Z",summary:"fuz_blog is now a reusable library",tags:["blog software","sveltekit"],comments:{url:"https://fosstodon.org/@ryanatkn/114422499177310600",type:"mastodon"}};var lo=D(`<section><p>This is <code>fuz_blog</code>'s first blog post. <code>fuz_blog</code> is a reusable SvelteKit library for adding blogs to your repos. It works!</p> <p>The source code is <a href="https://github.com/fuzdev/fuz_blog">here on GitHub</a>.</p> <p>To watch me create this project from an older messier codebase, see this <a href="https://www.youtube.com/watch?v=j1qTO5xolC4&amp;list=PLio_5jgyVNVm0nMXojbEP7vQOEakA8n4X&amp;index=1">video and playlist</a>. The code is at <a href="https://github.com/fuzdev/fuz_blog/pull/1">PR #1</a>.</p></section>`);function Eo(e){so(e,{get post(){return io},footer:a=>{ro(a)},children:(a,n)=>{var s=lo();y(a,s)},$$slots:{footer:!0,default:!0}})}export{Eo as component};
